# Обнаружения объектов

Для начала нужно активировать обнаружение объектов в [настройках](/docs/zed_param.md#параметры-с-префиксом-object_detection) камеры.

Теперь мы можем перейти рассмотрению кода:

```python
import roslib; roslib.load_manifest('<Название вашего проекта>')
import rospy

from zed_interfaces.msg import Object
from zed_interfaces.msg import ObjectsStamped

def callback(msg):
  for i in msg.objects:
    print(i.lable)

def listener():
	rospy.init_node('listenerBoss')
	rospy.Subscriber("/zed2/zed_node/obj_det/objects", ObjectsStamped, callback)
	rospy.spin()

if __name__ == '__main__':
	listener()
```

В [настройках](/docs/zed_param.md#параметры-с-префиксом-object_detection) вы можете выбрать одну из 5 обученных нейронных сетей: 

`0`: MULTI_CLASS_BOX (предназначена для нахождения людей, транспорта, животных, электронных устройств, фруктов, овощей и сумки на низкопроизводительных графических картах) 

`1`: MULTI_CLASS_BOX_ACCURATE (предназначена для нахождения людей, транспорта, животных, электронных устройств, фруктов, овощей и сумки на высокопроизводительных графических картах)

`2`: HUMAN_BODY_FAST (предназначена для нахождения людей и частей тела на низкопроизводительных графических картах)

`3`: HUMAN_BODY_ACCURATE (предназначена для нахождения людей на высокопроизводительных графических картах)

`4`: MULTI_CLASS_BOX_MEDIUM (предназначена для нахождения людей, транспорта, животных, электронных устройств, фруктов, овощей и сумки на среднепроизводительных графических картах)

`5`: HUMAN_BODY_MEDIUM (предназначена для нахождения людей на среднепроизводительных графических картах)

В функцию `callback` поступает массив, состоящий из данных о всех обнаруженных объектах. 

О каждом объекте можно получить следующий набор данных: 

`lable` - класс объекта (строка)

`lable_id` - ID объекта (16-бит целое число)

`sublable` - подкласс объекта (строка)

`confidence` - уровень уверенности обнаружения объекта (32-бит дробное число)

`position` - координаты x, y, z в массиве (32-бит дробные числа)

`position_covariance` матрица ковариации (32-бит дробные числа)

`velocity` скорость объекта (32-бит дробные числа)

`tracking_available` доступность отслеживания (`true`, `false`)

`tracking_state` статус отслеживания (`0` - объект утерян; `1` - объект обнаружен; `2` - объект утерян, траектория вычисляется)

`action_state` статус движения (`0` - стоит; `1` - движется)

`bounding_box_2d` 

```
0--------1
|        |
|        |
|        |
3--------2
```

`bounding_box_3d`

```
  1--------2
 /.       /|
0--------3 |
| .      | |
| 5......|.6
|.       |/
4--------7
```

`dimensions_3d` ширина, высота, длина объекта (32-бит дробное число)

`skeleton_available` доступность скелета человека (`true`, `false`)

`head_bounding_box_2d` положение x, y, z центроида головы человека

`head_bounding_box_3d`

`head_position`

`skeleton_2d`

`skeleton_2d`

<p align="right">Next | <b><a href="manipulator_manual.md">Сборка манипулятора</a></b>
<br/>
Back | <b><a href="depth.md">Глубина</a></b></p>
<p align="center"><sup>2021-2022 TRIADOS | </sup><a href="../README.md#содержание"><sup>Содержание</sup></a></p>
